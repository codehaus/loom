<?xml version="1.0"?>
<loom>
    <embeddor role="org.jcontainer.loom.interfaces.Embeddor"
        class="org.jcontainer.loom.components.embeddor.DefaultEmbeddor">

        <component role="org.jcontainer.loom.interfaces.Installer"
            class="org.jcontainer.loom.components.installer.DefaultInstaller"
            logger="installer"/>

        <component role="org.jcontainer.loom.interfaces.Deployer"
            class="org.jcontainer.loom.components.deployer.DefaultDeployer"
            logger="deployer"/>

        <component role="org.jcontainer.loom.interfaces.LogManager"
            class="org.jcontainer.loom.components.logger.DefaultLogManager"
            logger="logs"/>

        <!-- There is one JMX MBeanServer infrastructure currently
        supported by Avalon, namely MX4J. Previously the JMX RI
        was supported but due to severe bugs and lack of implementation
        of certain features (such as ModelMBeans), support has been
        dropped for the JMX RI implementation.

        The MX4J manager using the MX4J adapter devewloped at SourceForge
        See http://mx4j.sourceforge.net/ -

        org.jcontainer.loom.components.manager.MX4JSystemManager

        There is an impl of system manager that does nothing and it is....

        org.jcontainer.loom.components.manager.NoopSystemManager

        Alternatively, you could comment the whole SystemManager section out.
        -->

        <component role="org.jcontainer.loom.interfaces.SystemManager"
            class="org.jcontainer.loom.components.manager.MX4JSystemManager"
            logger="manager">

            <!--
            By default the Mx4J Http Adaptor will bind a webserver to a
            single network interface, localhost. If you wish to restrict it to
            only one a different interface, include that below. To bind to all
            interfaces, use 0.0.0.0 as the value.
            -->
            <!--
            <manager-adaptor-host>localhost</manager-adaptor-host>
            -->

            <!--
            This specifies the IP port which the Http Adaptor will bind on.
            -->
            <manager-adaptor-port>8082</manager-adaptor-port>

            <!--
            If you wish to enable the HTTP adaptor altogether
            then uncomment the following line.
            -->
            <!--<enable-http-adaptor>true</enable-http-adaptor>-->

            <!--
            The Http Adaptor will use the $PHOENIX_HOME/conf/xsl directory
            by default to retrieve it's stylesheets.
            -->
            <stylesheets-dir>${loom.home}/conf/xsl</stylesheets-dir>

            <!--
            If you want the HTTPAdaptor to require authentication then you need to specify
            a username and password in the next xml block.
            -->
            <!--
            <user>
            <name>user</name>
            <password>password</password>
            </user>
            -->

            <!--
            Mx4j is capable of exporting the MBeanServer over RMI. By default this is
            disabled but it can be enabled by specifying true in enable-rmi-adaptor element
            and specifying a particular naming factory.
            -->
            <!--
            <enable-rmi-adaptor>true</enable-rmi-adaptor>
            <rmi-naming-factory>com.sun.jndi.rmi.registry.RegistryContextFactory</rmi-naming-factory>
            <rmi-registry-port>1099</rmi-registry-port>
            -->

        </component>

        <component role="org.jcontainer.loom.interfaces.Kernel"
            class="org.jcontainer.loom.components.kernel.DefaultKernel"
            logger="kernel"/>

        <component role="org.jcontainer.loom.interfaces.ConfigurationInterceptor"
            class="org.jcontainer.loom.components.configuration.NoopConfigurationInterceptor"
            logger="config"/>

<!--
        <component role="org.jcontainer.loom.interfaces.ConfigurationInterceptor"
            class="org.jcontainer.loom.components.configuration.FileSystemPersistentConfigurationInterceptor"
            logger="config">
            <storage-directory>${loom.home}/conf/apps</storage-directory>
        </component>
-->

        <component role="org.jcontainer.loom.interfaces.ConfigurationValidator"
            class="org.jcontainer.loom.components.validator.DefaultConfigurationValidator"
            logger="validator">
            <schema-type name="relax-ng" uri="http://relaxng.org/ns/structure/1.0"/>
        </component>

        <component role="org.jcontainer.loom.interfaces.ClassLoaderManager"
            class="org.jcontainer.loom.components.classloader.DefaultClassLoaderManager"
            logger="classes"/>
        <component role="org.jcontainer.loom.components.extensions.pkgmgr.ExtensionManager"
            class="org.jcontainer.loom.components.extensions.DefaultExtensionManager"
            logger="packages"/>
        <!--
        <component role="org.jcontainer.loom.components.extensions.pkgmgr.ExtensionManager"
        class="org.jcontainer.loom.components.extensions.pkgmgr.impl.NoopPackageRepository"
        logger="packages"/>
        -->

        <!--
        Can disable the Hot-Deploy monitor by commenting out the next component.
        -->
        <component
            class="org.jcontainer.loom.components.monitor.DefaultDeploymentMonitor"
            logger="monitor">
            <!-- the amount of time in milliseconds between checks
            of deployment dir -->
            <monitor-frequency>1000</monitor-frequency>
        </component>

        <component role="org.apache.excalibur.instrument.InstrumentManager"
            class="org.jcontainer.loom.components.instrument.NoopInstrumentManager"
            logger="instrument"/>

        <!--
        Use the DefaultInstrumentManager when you want to enable instrumentation of Loom and
        hosted applications

        You may also want to add:
        <!ENTITY % instrumentables.xml SYSTEM "instrumentables.xml">
        to the top of the kernel (before the phoenix tag) to store instrumentable configuration
        in a separate document
        <component role="org.apache.excalibur.instrument.InstrumentManager"
        class="org.apache.excalibur.instrument.manager.DefaultInstrumentManager"
        logger="instrument">
        <name>phoenix</name>
        <description>JContainer Loom</description>
        <connectors>
        <connector class="altrmi"/>
        </connectors>
        &instrumentables;
        </component>
                -->
    </embeddor>

</loom>
