<project
    xmlns:j="jelly:core"
    xmlns:maven="jelly:maven"
    xmlns:ant="jelly:ant"
    default="main">

    <preGoal name="java:compile">
        <ant:mkdir dir="target/src/java/org/jcontainer/loom/interfaces"/>
        <ant:tstamp/>
        <j:file name="target/src/java/org/jcontainer/loom/interfaces/Version.java"
            omitXmlDeclaration="true" escapeText="false" >
            package org.jcontainer.loom.interfaces;
            interface Version
            {
            String SOFTWARE = "${pom.name}";
            String VERSION = "${pom.currentVersion}";
            String DATE = "${TODAY}";
            }
        </j:file>
        <ant:path id="version.src.set"
            location="target/src/java"/>
        <maven:addPath id="maven.compile.src.set" refid="version.src.set"/>
    </preGoal>

    <goal name="main">
        <attainGoal name="build"/>
    </goal>

    <goal name="build">
        <attainGoal name="jar:install"/>
    </goal>

    <goal name="deploy">
        <attainGoal name="jar:deploy"/>
    </goal>

</project>
