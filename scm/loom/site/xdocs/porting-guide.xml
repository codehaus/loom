<?xml version="1.0" encoding="iso-8859-1"?>
<document>

    <properties>
        <title>Porting Guide</title>
    </properties>

    <body>

        <section name="Porting Phoenix 4.0.x applications">
            <p>
		    Loom 1.0 supports applications running in Phoenix 4.0.x releases,
		    provided that the sar is built using the
                <a href="/plugins/maven-sar/">Maven Sar Plugin</a>
		    provided by Loom and the appropriate libraries are bundles in the sar.
            </p>
            <subsection name="Creating a Loom Sar">
                <p>
			Since the generation of metaclass descriptors is more generic in
			Loom compared with Phoenix, but still fully compatible with it,
			users can deploy applications running in Phoenix 4.0.x by simply
			regenerating from the Java source the descriptors using the Maven Sar Plugin.
                </p>
                <p>
			To create a sar, using the
                    <a href="/plugins/maven-sar/">Maven Sar Plugin</a>
			simply add the dependency to your Maven project
                    <source>
                        <![CDATA[
<dependency>
    <groupId>loom</groupId>
    <artifactId>maven-sar-plugin</artifactId>
    <version>[plugin-version]</version>
    <type>plugin</type>
</dependency>
                    ]]>
                    </source>
			And then make sure that the sar:metagenerate is invoked after java
            compilation by adding the following to a custom maven.xml.
                    <source>
                        <![CDATA[
    <postGoal name="java:compile">
        <attainGoal name="sar:metagenerate"/>
    </postGoal>
                    ]]>
                    </source>
			and execute
                    <source>
maven sar
                    </source>
                </p>
            </subsection>
            <subsection name="Comparison of libraries bundled">
                <p>
			Compared to the Phoenix 4.0.x distribution, in the Loom 1.0 distribution
			some of the libraries in the
                    <code>lib/</code> directory
			have been removed as they are not used by the container.
			If your app uses any of the excluded libraries,
			you simply need to bundle them with the sar.
                </p>
                <p>
			Loom 1.0 comes with a lean set of libraries:
                    <source>
avalon-framework
excalibur-instrument
logkit
log4j
mx4j-jmx
phoenix-client
                    </source>
                </p>
                <p>
			Phoenix 4.0.x ships a bigger set of libraries:
                    <source>
avalon-framework
excalibur-baxter
excalibur-cli
excalibur-collections
excalibur-concurrent
excalibur-configuration
excalibur-containerkit
excalibur-extension
excalibur-i18n
excalibur-instrument
excalibur-io
excalibur-logger
excalibur-pool
excalibur-thread
excalibur-threadcontext
excalibur-util
isorelax.jar
jing.jar
logkit
phoenix-client
xalan
xercesImpl
xml-apis
                    </source>
                </p>
            </subsection>
        </section>

    </body>
</document>
