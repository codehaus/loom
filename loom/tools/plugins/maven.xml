<project default="main"
  xmlns:maven="jelly:maven">

  <goal name="main">
    <attainGoal name="plugins-build"/>
  </goal>

  <goal 
    name="plugins-build"
    description="Build each plugin into an installable jar">
    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      excludes="examples/*"
      goals="clean,plugin"
      banner="Building"
      ignoreFailures="true"
    />
  </goal>

  <goal 
    name="plugins-install"
    description="Installs each plugin into plugins dir">
    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      excludes="examples/*"
      goals="clean,plugin:install"
      banner="Building"
      ignoreFailures="true"
    />
  </goal>

  <goal name="plugins-clean"
    description="Cleans each plugin project">
    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      goals="clean"
      banner="Building"
      ignoreFailures="false"
    />
  </goal>

  <goal name="plugins-convert-snapshots"
    description="Converts each plugin snapshot versions into resolved timestamped versions.">
      <maven:reactor
        basedir="${basedir}"
        includes="*/project.xml"
        goals="convert-snapshots-auto"
        banner="Resolving snapshot versions"
        ignoreFailures="true"
      />
  </goal>

  <goal name="plugins-docs"
    description="Builds each plugin documentation">
    <maven:reactor
      basedir="${basedir}"
      includes="*/project.xml"
      goals="xdoc"
      banner="Generating Docs For"
      ignoreFailures="false"
    />
  </goal>

</project>
